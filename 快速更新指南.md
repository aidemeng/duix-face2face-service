# ğŸš€ Duix Face2Face å¿«é€Ÿæ›´æ–°æŒ‡å—

## âš¡ ä¸€é”®æ›´æ–°
```bash
cd /Users/wanghaoxuan/video_project/duix-face2face-service
./update.sh
```

## ğŸ“‹ æ‰‹åŠ¨æ›´æ–° (3æ­¥éª¤)

### 1ï¸âƒ£ æ„å»ºæ¨é€é•œåƒ
```bash
cd /Users/wanghaoxuan/video_project/duix-face2face-service
docker build --platform linux/amd64 --no-cache -t duix-face2face-api .
docker tag duix-face2face-api image.ppinfra.com/prod-eftqrvyctuvyrddswevc/duix-face2face-api:latest
docker push image.ppinfra.com/prod-eftqrvyctuvyrddswevc/duix-face2face-api:latest
```

### 2ï¸âƒ£ æ›´æ–°äº‘ç«¯æœåŠ¡
åœ¨PPIOå®ä¾‹æ‰§è¡Œï¼š
```bash
docker-compose -f docker-compose.cloud.yml pull
docker-compose -f docker-compose.cloud.yml up -d
```

### 3ï¸âƒ£ éªŒè¯æœåŠ¡
```bash
curl http://localhost:8385/health
```

## ğŸ“¡ APIä½¿ç”¨ç¤ºä¾‹

```bash
# æäº¤ä»»åŠ¡ (POST)
curl -X POST "http://localhost:8385/api/submit_task" \
  -H "Content-Type: application/json" \
  -d '{"audio_url": "https://example.com/audio.wav", "video_url": "https://example.com/video.mp4"}'

# æŸ¥è¯¢ä»»åŠ¡çŠ¶æ€ (GET)
curl "http://localhost:8385/api/query_task?task_code=your-task-id"

# è·å–ç»“æœ (GET)
curl "http://localhost:8385/api/get_result?result_filename=result.mp4&task_code=your-task-id"
```

## ğŸ” å¸¸ç”¨å‘½ä»¤

```bash
# æ£€æŸ¥æœåŠ¡çŠ¶æ€
docker ps
curl http://localhost:8385/health

# æŸ¥çœ‹æ—¥å¿—
docker-compose -f docker-compose.cloud.yml logs -f

# é‡å¯æœåŠ¡
docker-compose -f docker-compose.cloud.yml restart
```

## ğŸš¨ æ•…éšœæ’é™¤

| é—®é¢˜ | è§£å†³æ–¹æ¡ˆ |
|------|----------|
| æ„å»ºå¤±è´¥ | `docker system prune -f` |
| æœåŠ¡æ— å“åº” | `docker-compose restart` |
| GPUä¸å¯ç”¨ | `nvidia-smi` |

## ğŸ”— é‡è¦é“¾æ¥

- [PPIOæ§åˆ¶å°](https://ppio.com/gpu-instance/console)
